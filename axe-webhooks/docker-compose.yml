version: "3.7"

services:
  web:
    image: axe-webhooks-web:latest
    build:
      context: ./web
    container_name: axe-webhooks_web_1
    restart: unless-stopped
    ports:
      - "${APP_AXE_WEBHOOKS_WEB_PORT:-3456}:3456"
    volumes:
      - ${APP_DATA_DIR}:/data
    environment:
      ADMIN_PASSWORD: "${APP_AXE_WEBHOOKS_ADMIN_PASSWORD:-}"

  watcher:
    image: axe-webhooks-watcher:latest
    build:
      context: ./watcher
    container_name: axe-webhooks_watcher_1
    restart: unless-stopped
    volumes:
      - ${APP_DATA_DIR}:/data
    environment:
      POLL_SECONDS: "${APP_AXE_WEBHOOKS_POLL_SECONDS:-15}"
    depends_on:
      - web
